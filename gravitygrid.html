<!doctype html>
<html lang="en-us">

<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="initial-scale=1" />
	<title>Gravity Grid</title>
	<style>
		* { margin:0; padding:0; }
		html, body { width:100%; height:100%; margin:0; overflow:hidden; }
		canvas { display:block; }
	</style>
</head>

<body>
	<canvas id="canvas" oncontextmenu="event.preventDefault()" tabindex=-1 style="touch-action:none"></canvas>

	<script type='text/javascript'>
		var Module = {
			preRun: [],
			postRun: [],
			print: (function () {
				return function (text) {
					if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
					console.log(text);
				};
			})(),
			canvas: (() => {
				var canvas = document.getElementById('canvas');
				canvas.width = window.innerWidth * window.devicePixelRatio;
				canvas.height = window.innerHeight * window.devicePixelRatio;
				canvas.style.width = window.innerWidth + "px";
				canvas.style.height = window.innerHeight + "px";

				// As a default initial behavior, pop up an alert when webgl context is lost. To make your
				// application robust, you may want to override this behavior before shipping!
				// See http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.15.2
				canvas.addEventListener("webglcontextlost", (e) => { alert('WebGL context lost. You will need to reload the page.'); e.preventDefault(); }, false);

				return canvas;
			})(),
		};

		window.addEventListener("resize", function() {
			canvas.width = window.innerWidth * window.devicePixelRatio;
			canvas.height = window.innerHeight * window.devicePixelRatio;
			canvas.style.width = window.innerWidth + "px";
			canvas.style.height = window.innerHeight + "px";
		});


		function toggleFullScreen() {
			if (!document.fullscreenElement) {
				document.documentElement.requestFullscreen();
			} else if (document.exitFullscreen) {
				document.exitFullscreen();
			}
		}

		document.addEventListener(
			"keydown",
			(e) => {
				if (e.key === "Enter") {
				toggleFullScreen();
				}
			},
			false,
		);

		toggleFullScreen();

		window.addEventListener("load",function() {
			// Set a timeout...
			setTimeout(function(){
				// Hide the address bar!
				window.scrollTo(0, 1);
			}, 0);
		});


	</script>
	<script async type="text/javascript" src="assets/gravity-grid/game.js"></script>
</body>

</html>